# ☕ 커피뽑기 자동 시뮬레이터

사내 "커피뽑기" 자동 시뮬레이터입니다. 우측 사이드바에서 인원을 선택하고 남길 인원 수를 설정한 후 게임을 시작하면, 좌측 배틀 보드에서 참가자들이 AI 랜덤 이동으로 싸우며, 생존자가 목표 인원 수와 같아지면 즉시 종료하고 해당 인원을 "당첨(커피)"으로 표시합니다.

## 🎮 게임 특징

- **완전 자동**: 모든 참가자가 AI로 자동 조작
- **목표 기반**: 생존자가 목표 인원 수와 같아지면 즉시 종료
- **Agar.io 스타일**: 세포가 서로를 잡아먹으며 성장
- **아이템 시스템**: 스피드, 부활, 표창(공격) 아이템
- **시드 기반**: 같은 시드로 재현 가능한 결과
- **실시간 HUD**: 참가자 상태, 타이머, 이벤트 로그
- **CSV 저장**: 우승자 정보를 CSV 파일로 다운로드

## 🚀 실행 방법

1. 모든 파일을 같은 폴더에 저장
2. `index.html` 파일을 웹 브라우저에서 열기
3. **빌드나 의존성 설치 불필요!**

## 🎯 게임 규칙

### 기본 규칙
- **생존**: 목표 인원 수만큼 생존하면 게임 종료
- **성장**: 작은 세포를 잡아먹으면 크기 증가
- **사망**: 큰 세포와 충돌하면 즉시 사망

### 아이템 효과
- **⚡ 스피드**: 이동속도 2배 (6초간)
- **❤️ 부활**: 죽은 참가자 중 1명 즉시 부활
- **🎯 표창**: 크기 무시 즉사 권능 (5초간)

### 승리 조건
- **목표 달성**: 생존자 수가 목표 인원 수와 같아지면 즉시 종료
- **타임리밋**: 제한시간 도달 시 최대 크기 기준 상위 N명 우승
- **동률 처리**: 마지막 성장 시간이 늦은 자 우승

## 🎮 조작법

### 사이드바 설정
1. **인원 선택**: 라디오 스타일의 동그라미 토글로 참가자 선택 (다중 선택 가능)
2. **전체 선택/해제**: 한 번에 모든 참가자 선택 또는 해제
3. **남길 인원 수**: 1 ≤ N < 선택 인원 수로 설정
4. **시드 입력**: 같은 시뮬레이션 재현용 (선택사항)

### 게임 컨트롤
- **Start**: 게임 시작 (최소 2명 선택, 올바른 목표 인원 수 설정 필요)
- **Pause/Resume**: 게임 일시정지 및 재개
- **Restart**: 같은 설정으로 게임 재시작

## 🏗️ 프로젝트 구조

```
/
├─ index.html          # 메인 HTML 파일
├─ style.css           # 스타일시트
├─ main.js             # 게임 엔트리 포인트
├─ config.js           # 게임 설정 및 기본 참가자 목록
├─ rng.js              # 시드 기반 난수 생성기
├─ game/               # 게임 로직
│  ├─ engine.js        # 게임 엔진 (상태 관리, 프레임 루프)
│  ├─ world.js         # 게임 월드 (맵, 스폰, 엔터티 관리)
│  ├─ entities.js      # 게임 엔티티 (Cell, Item, 충돌 감지)
│  ├─ ai.js            # AI 시스템 (랜덤 워크, 벽 회피)
│  ├─ systems.js       # 게임 시스템 (이동, 충돌, 아이템, 부활)
│  └─ render.js        # 렌더링 시스템 (Canvas 그리기)
└─ ui/                 # 사용자 인터페이스
   ├─ sidebar.js       # 사이드바 (참가자 선택, 게임 설정, 컨트롤)
   └─ hud.js           # HUD (게임 상태, 이벤트 로그, 우승자 표시)
```

## ⚙️ 설정 변경

`config.js` 파일에서 게임 설정을 수정할 수 있습니다:

```javascript
export const CONFIG = {
    // 캔버스 설정
    canvas: { 
        width: 1024, 
        height: 640, 
        margin: 24 
    },
    
    // 게임 시간 설정
    timeLimitSec: 0,  // 0이면 무한
    
    // 아이템 스폰 설정
    itemSpawnIntervalMs: 1500,  // 아이템 스폰 주기
    
    // AI 행동 설정
    ai: {
        turnEveryMs: [600, 1400],  // 방향전환 주기
        jitter: 0.35,              // 방향 흔들림
        avoidWallsBias: 0.7        // 벽 회피 성향
    }
};
```

## 🎨 UI 구성

### 좌측: 배틀 보드
- **1024x640 Canvas**: 흰색 배경, 가장자리 여백
- **세포 표시**: 반투명 그라데이션 + 그림자, 이름 표시
- **버프 효과**: 스피드 꼬리, 표창 아이콘, 무적 점선 링
- **아이템**: 깜빡이는 애니메이션, 심볼 표시

### 우측: 사이드바
- **데이터 가이드**: 제목만 표시 (스타일용)
- **인원 선택**: 라디오 스타일 다중 선택, 전체 선택/해제
- **게임 설정**: 남길 인원 수, 시드 입력
- **게임 컨트롤**: Start, Pause/Resume, Restart 버튼
- **게임 상태**: 생존자 수, 경과/남은 시간
- **이벤트 로그**: 최근 10개 이벤트
- **당첨자 리스트**: 게임 종료 시 표시, CSV 다운로드

## 🔧 개발자 도구

브라우저 콘솔에서 다음 명령어 사용 가능:

- `debugGame()`: 게임 상태 정보 출력
- `restartGame()`: 게임 재시작

## 🚨 문제 해결

### 게임이 실행되지 않는 경우
1. 모든 파일이 같은 폴더에 있는지 확인
2. 브라우저 콘솔에서 오류 메시지 확인
3. ES6 모듈을 지원하는 최신 브라우저 사용

### 성능 문제
1. `config.js`에서 `frameCap` 값 조정
2. 브라우저 하드웨어 가속 활성화
3. 다른 탭에서 게임 실행

## 📝 CSV 다운로드

게임 종료 시 "CSV 다운로드" 버튼을 클릭하면 다음 정보가 포함된 CSV 파일을 다운로드할 수 있습니다:

- **rank**: 순위
- **id**: 참가자 ID
- **name**: 참가자 이름
- **radius**: 최종 크기
- **seed**: 사용된 시드 (또는 "시간기반")
- **finishedAt**: 게임 종료 시간

## 🎯 게임 플레이 예시

1. **설정**: 우측에서 참가자 6명 선택, 남길 인원 수 2명 설정
2. **시작**: Start 버튼 클릭
3. **관전**: 좌측에서 AI들이 자동으로 경쟁하는 모습 감상
4. **종료**: 생존자가 2명이 되면 자동으로 게임 종료
5. **결과**: 우측 하단에 당첨자 2명 표시, CSV 다운로드 가능

## 📝 라이선스

이 프로젝트는 교육 및 개인 사용 목적으로 제작되었습니다.

## 🤝 기여

버그 리포트나 기능 제안은 언제든 환영합니다!

---

**즐거운 커피뽑기 시뮬레이션 되세요! ☕**
